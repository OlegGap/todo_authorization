(this.webpackJsonptodo__redux=this.webpackJsonptodo__redux||[]).push([[0],{16:function(e,t,a){e.exports={modifyButton:"CardEdit_modifyButton__2TL5V",wrapper:"CardEdit_wrapper__2aRZ1",form:"CardEdit_form__9DY6L",modifyText:"CardEdit_modifyText__2uwys",modifyButtonConfirm:"CardEdit_modifyButtonConfirm__O7Hm9"}},18:function(e,t,a){e.exports={headerContainer:"Header_headerContainer__1YLYN",headerWrapper:"Header_headerWrapper__1oKyh",sesionButtons:"Header_sesionButtons__33ERz",logoutButton:"Header_logoutButton__21mWM"}},19:function(e,t,a){e.exports={sortContainer:"Sort_sortContainer__2gjqP",sortTitle:"Sort_sortTitle__1egA9",sortField:"Sort_sortField__3dvjg",sortDirection:"Sort_sortDirection__2PqKY"}},24:function(e,t,a){e.exports={container:"Paginatin_container__2-svB",active:"Paginatin_active__3u5g9"}},4:function(e,t,a){e.exports={addNewCard:"AddCard_addNewCard__1T7OC",close:"AddCard_close__YAW9V",header:"AddCard_header__31v_P",contentForm:"AddCard_contentForm__3BzS4",contentFormName:"AddCard_contentFormName__1vrrr",contentFormEmail:"AddCard_contentFormEmail__gsxE9",contentFormDescription:"AddCard_contentFormDescription__xSMnD",button:"AddCard_button__25GoP"}},45:function(e,t,a){e.exports={list:"List_list__3ccy6"}},50:function(e,t,a){e.exports=a(89)},8:function(e,t,a){e.exports={loginButton:"Login_loginButton__1Kw88",loginWrapper:"Login_loginWrapper__RDORu",loginForm:"Login_loginForm__3tVIN",loginButtonSubmit:"Login_loginButtonSubmit__3epZa",error:"Login_error__3x7_h"}},82:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),i=a(12),l=a(5),s=a(38),u=a(39),d=a(47),m={FETCH_CARDS_START:"FETCH_CARDS_START",FETCH_CARDS_SUCCESS:"FETCH_CARDS_SUCCESS",FETCH_CARDS_ERROR:"FETCH_CARDS_ERROR",ADD_CARD_START:"ADD_CARD_START",ADD_CARD_ERROR:"ADD_CARD_ERROR",ADD_CARD_SUCCESS:"ADD_CARD_SUCCESS",MODIFY_CARD_SUCCESS:"MODIFY_CARD_SUCCESS",REMOVE_CARD:"REMOVE_CARD_SUCCESS"},_=Object(l.combineReducers)({list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case m.FETCH_CARDS_SUCCESS:return n.cards;case m.REMOVE_CARD_SUCCESS:return e.filter((function(e){return e.id!==n.id}));case m.ADD_CARD_SUCCESS:return[].concat(Object(d.a)(e),[n.cards]);default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case m.FETCH_CARDS_START:case m.ADD_CARD_START:return!1;case m.FETCH_CARDS_SUCCESS:case m.ADD_CARD_SUCCESS:return!0;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case m.FETCH_CARDS_START:case m.ADD_CARD_START:return e;case m.FETCH_CARDS_ERROR:case m.ADD_CARD_ERROR:return n.error;default:return e}}}),p="LOGIN_REQUEST",C="LOGIN_SUCCESS",E="LOGIN_ERROR",f="LOGOUT",g="AUTHENTICATED",h=Object(l.combineReducers)({authenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case C:case g:return!0;case f:return!1;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case C:return n.profile.message.token;case g:return n.token;case f:return null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case E:return n.error;default:return e}}}),S=Object(l.combineReducers)({todo:_,sesion:h}),D=[u.a],v=l.applyMiddleware.apply(void 0,D),y=Object(l.createStore)(S,Object(s.composeWithDevTools)(v)),R=a(13),b=a.n(R),T=a(17),O=a.n(T),A={page:1,sortField:"id",sortDirection:"asc"},N=a(7),x=a.n(N),F=function(e){return e.todo.loading},w=function(e){return e.todo.error},L=function(e){return e.todo.list.tasks},k=function(e){return e.todo.list.total_task_count},B=function(e){return e.sesion.authenticated},I=function(e){return e.sesion.error},j=a(40),H=a(41),P=a(48),U=a(42),M=a(49),W=a(2),Y=(a(81),a(82),a(18)),G=a.n(Y),V=a(11),q=a(8),z=a.n(q),K=function(e){var t=e.authenticated,a=e.error,o=e.login;Object(n.useEffect)((function(){t&&W.b.success("You are logged in!",{position:W.b.POSITION.BOTTOM_LEFT})}),[t]);var c=function(e){e.preventDefault();var t=e.target.querySelector('input[name="login"]').value,a=e.target.querySelector('input[name="password"]').value;o({username:t,password:a})};return r.a.createElement(V.a,{className:z.a.loginWrapper,trigger:r.a.createElement("button",{type:"button",className:z.a.loginButton},"LOG IN"),modal:!0},(function(e){return r.a.createElement("form",{onSubmit:c,className:z.a.loginForm},"Login: ",r.a.createElement("br",null),r.a.createElement("input",{name:"login",type:"text",className:z.a.inputLogin,placeholder:"Type a login"}),r.a.createElement("br",null),a&&a.username&&r.a.createElement("div",{className:z.a.error},a.username),"Password: ",r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",className:z.a.inputPassword,placeholder:"Type a password"}),r.a.createElement("br",null),a&&a.password&&r.a.createElement("div",{className:z.a.error},a.password),r.a.createElement("button",{type:"submit",className:z.a.loginButtonSubmit},"Login"),t?e():null)}))},J=a(4),Z=a.n(J),Q=function(e,t){return e.querySelector('input[name="'.concat(t,'"]'))&&e.querySelector('input[name="'.concat(t,'"]')).value},$=function(e){var t=e.addCard,a=function(e,a){e.preventDefault();var n=e.target;(function(e){return Q(e,"name").length?Q(e,"email").length?Q(e,"text").length?!!new RegExp("^([a-z0-9_-]+.)*[a-z0-9_-]+@[a-z0-9_-]+(.[a-z0-9_-]+)*.[a-z]{2,6}$").test(Q(e,"email"))||(W.b.warn("Input valid email, pls!",{position:W.b.POSITION.BOTTOM_LEFT}),!1):(W.b.warn("Input description, pls!",{position:W.b.POSITION.BOTTOM_LEFT}),!1):(W.b.warn("Input email, pls!",{position:W.b.POSITION.BOTTOM_LEFT}),!1):(W.b.warn("Input name, pls!",{position:W.b.POSITION.BOTTOM_LEFT}),!1)})(n)&&(t(function(e){return{username:Q(e,"name"),email:Q(e,"email"),text:Q(e,"text"),status:0}}(n)),n.reset(),a())};return r.a.createElement(V.a,{className:Z.a.addCardWrapper,trigger:r.a.createElement("button",{type:"button",className:Z.a.addNewCard},"+ ADD CARD"),modal:!0},(function(e){return r.a.createElement("div",{className:Z.a.modal},r.a.createElement("button",{type:"button",className:Z.a.close,onClick:e},"\xd7"),r.a.createElement("div",{className:Z.a.header}," Add new card "),r.a.createElement("div",{className:Z.a.content},r.a.createElement("form",{onSubmit:function(t){return a(t,e)},className:Z.a.contentForm},r.a.createElement("div",{className:Z.a.contentFormName},"Name: ",r.a.createElement("input",{type:"text",name:"name"})),r.a.createElement("div",{className:Z.a.contentFormEmail},"Email: ",r.a.createElement("input",{type:"email",name:"email"})),r.a.createElement("div",{className:Z.a.contentFormDescription},"Description: ",r.a.createElement("input",{type:"text",name:"text"})),r.a.createElement("button",{type:"submit",className:Z.a.button},"ADD CARD"))))}))},X={addCard:function(e){return function(t){t({type:m.ADD_CARD_START});var a={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:O.a.stringify(e),url:"https://uxcandy.com/~shapoval/test-task-backend/v2/create?developer=Olegg"};b()(a).then((function(e){var a;t((a=e.data,{type:m.ADD_CARD_SUCCESS,payload:{cards:a}}))})).catch((function(e){t(function(e){return{type:m.ADD_CARD_ERROR,payload:{error:e}}}(e))}))}}},ee=Object(i.b)((function(e){return{loading:F(e),error:w(e)}}),X)($),te=function(e){var t=e.logout,a=e.login,n=e.errorLogin,o=e.authenticated;return r.a.createElement("div",{className:G.a.headerContainer},r.a.createElement("div",{className:G.a.headerWrapper},r.a.createElement("div",null,"TODO"),r.a.createElement("div",{className:G.a.sesionButtons},r.a.createElement(ee,null),!o&&r.a.createElement(K,{authenticated:o,login:a,error:n}),o&&r.a.createElement("button",{type:"button",onClick:t,className:G.a.logoutButton},"LOG OUT"))))},ae=a(15),ne=a(23),re=a.n(ne),oe=(a(85),a(19)),ce=a.n(oe),ie=["id","username","email","status"],le=["asc","desc"],se=function(e){var t=e.fetchList,a=Object(n.useState)(ie[0]),o=Object(ae.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(le[0]),s=Object(ae.a)(l,2),u=s[0],d=s[1];return r.a.createElement("div",{className:ce.a.sortContainer},r.a.createElement("h2",{className:ce.a.sortTitle},"Sort: "),r.a.createElement("div",{className:ce.a.sortField},r.a.createElement(re.a,{options:ie,onChange:function(e){t(1,e.value,null),i(e.value)},placeholder:"Select an option",value:c})),r.a.createElement("div",{className:ce.a.sortDirection},r.a.createElement(re.a,{options:le,onChange:function(e){t(1,null,e.value),d(e.value)},placeholder:"Select an option",value:u})))},ue=a(9),de=a.n(ue),me=function(e,t){return e.split("").length>t?"".concat(e.split("").slice(0,t).join(""),"..."):e},_e=a(16),pe=a.n(_e),Ce=function(e){var t=e.cardData,a=e.hundelModifyCard;return r.a.createElement(V.a,{className:pe.a.wrapper,trigger:r.a.createElement("button",{type:"button",className:pe.a.modifyButton},"EDIT CARD"),modal:!0},(function(e){return r.a.createElement("form",{onSubmit:function(t){return function(e,t){e.preventDefault(),a(e.target.querySelector('textarea[name="text"]').value),t()}(t,e)},className:pe.a.form},"Text: ",r.a.createElement("br",null),r.a.createElement("textarea",{name:"text",type:"text",className:pe.a.modifyText,defaultValue:t.text}),r.a.createElement("button",{type:"submit",className:pe.a.modifyButtonConfirm},"Edit"))}))},Ee=function(e){var t=e.cardData,a=e.authenticated,o=e.modifyCard,c=Object(n.useState)(t.status),i=Object(ae.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(t.text),d=Object(ae.a)(u,2),m=d[0],_=d[1];return r.a.createElement("li",{className:de.a.cardContainer},r.a.createElement("h4",{className:de.a.cardTitle},"Title: ",me(t.username,20)),r.a.createElement("div",{className:de.a.content},r.a.createElement("h4",null,me(m,150)),r.a.createElement("h4",{className:de.a.contentEmail},"Email: ",t.email)),r.a.createElement("div",{className:de.a.status},"Status: ",l?"DONE":"IN PROGRESS"),a&&r.a.createElement("div",{className:de.a.adminButtons},r.a.createElement("div",{className:de.a.statusChangeContainer},"Done:",r.a.createElement("input",{type:"checkbox",className:de.a.statusChange,defaultChecked:l,onChange:function(){s(!l);var e={status:t.status?0:1,token:x.a.get("authenticated"),id:t.id};o(e)}})),r.a.createElement(Ce,{cardData:t,hundelModifyCard:function(e){_(e);var a={text:e,token:x.a.get("authenticated"),id:t.id};o(a)}})))},fe=a(45),ge=a.n(fe),he=function(e){var t=e.listCards,a=e.authenticated,n=e.modifyCard;return r.a.createElement("ul",{className:ge.a.list},t.map((function(e){return r.a.createElement(Ee,{key:e.id,cardData:e,authenticated:a,modifyCard:n})})))},Se=a(46),De=a.n(Se),ve=a(24),ye=a.n(ve),Re=function(e){var t=e.fetchList,a=e.pageCount;return r.a.createElement(De.a,{previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"break-me",pageCount:a,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(e){t(e.selected+1)},containerClassName:ye.a.container,activeClassName:ye.a.active})},be=function(e){function t(){return Object(j.a)(this,t),Object(P.a)(this,Object(U.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(H.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchList,a=e.fetchAuthenticated;x.a.get("authenticated")&&a(x.a.get("authenticated")),t()}},{key:"render",value:function(){var e=this.props,t=e.cards,a=e.authenticated,n=e.errorLogin,o=e.tasksCount,c=e.fetchList,i=e.modifyCard,l=e.logout,s=e.login;return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{logout:l,login:s,errorLogin:n,authenticated:a}),r.a.createElement(se,{fetchList:c}),t&&r.a.createElement(he,{listCards:t,authenticated:a,modifyCard:i}),r.a.createElement(Re,{pageCount:+o/3,fetchList:c}),r.a.createElement(W.a,null))}}]),t}(n.Component),Te={fetchList:function(e,t,a){return function(n){n({type:m.FETCH_CARDS_START}),A.page=e||A.page,A.sortField=t||A.sortField,A.sortDirection=a||A.sortDirection,b.a.get("https://uxcandy.com/~shapoval/test-task-backend/v2/?developer=Olegg&sort_field=".concat(A.sortField,"&sort_direction=").concat(A.sortDirection,"&page=").concat(A.page)).then((function(e){return n((t=e.data.message,{type:m.FETCH_CARDS_SUCCESS,payload:{cards:t}}));var t})).catch((function(e){n(function(e){return{type:m.FETCH_CARDS_ERROR,payload:{error:e}}}(e))}))}},modifyCard:function(e){return function(t){var a={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:O.a.stringify(e),url:"https://uxcandy.com/~shapoval/test-task-backend/v2/edit/".concat(e.id,"?developer=Olegg")};b()(a).then((function(e){var a;t((a=e.data,{type:m.MODIFY_CARD_SUCCESS,payload:{card:a}}))}))}},logout:function(){return function(e){x.a.remove("authenticated"),e({type:f})}},login:function(e){return function(t){var a={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},data:O.a.stringify(e),url:"https://uxcandy.com/~shapoval/test-task-backend/v2/login?developer=Olegg"};t({type:p}),b()(a).then((function(e){var a,n=e.data;return"ok"===n.status?(x.a.set("authenticated",n.message.token,{expires:1}),t({type:C,payload:{profile:n}})):t((a=n.message,{type:E,payload:{error:a}}))}))}},fetchAuthenticated:function(e){return function(t){t(function(e){return{type:g,payload:{token:e}}}(e))}}},Oe=Object(i.b)((function(e){return{cards:L(e),tasksCount:k(e),authenticated:B(e),errorLogin:I(e)}}),Te)(be);c.a.render(r.a.createElement(i.a,{store:y},r.a.createElement(Oe,null)),document.getElementById("root"))},9:function(e,t,a){e.exports={cardContainer:"Card_cardContainer__1Ex-8",cardTitle:"Card_cardTitle__1hLPi",content:"Card_content__27baT",contentEmail:"Card_contentEmail__2bCKK",status:"Card_status__1NKv-",adminButtons:"Card_adminButtons__37cjH",statusChangeContainer:"Card_statusChangeContainer__1lm0V",statusChange:"Card_statusChange__1NICm"}}},[[50,1,2]]]);
//# sourceMappingURL=main.c55d27b4.chunk.js.map